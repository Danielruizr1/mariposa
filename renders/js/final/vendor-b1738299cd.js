function moveBitacora(){$(".form-container").toggleClass("fullWidth")}var app=angular.module("seguimientos",[]);app.controller("AlertController",function($scope,$filter){function segFilter(value){return!!$scope.search&&("string"==typeof value[$scope.searchKey]?value[$scope.searchKey].toLowerCase().includes($scope.search.toLowerCase()):value[$scope.searchKey]==$scope.search)}$scope.seguimientos=window.parent.seguimiento,$scope.visible=!1,$scope.toDisplay=10,$scope.filteredItems=[],$scope.search="",$scope.searchKey="",$scope.close=function(){$scope.visible=!1},$(".check").on("keydown",function(){$scope.visible=!0}),$("input, select, textarea").on("focusin",function(){$scope.visible=!1}),$scope.changeSearch=function(val,key){$scope.search=val,$scope.searchKey=key,$scope.filtered=$scope.seguimientos.filter(segFilter)}}),$(document).ready(function(e){lists.agencia={},lists.ciudad={},lists.agente={},$("#Enviar").hide(),window.parent.agencia.forEach(function(agencia){lists.agencia[agencia.name]=agencia.id,$("#agencia-list").append("<option  value='"+agencia.name+"'>")}),window.parent.ciudad.forEach(function(ciudad){lists.ciudad[ciudad.name]=ciudad.id,lists.ciudad[ciudad.id]=ciudad.name,$("#ciudades-list").append("<option value='"+ciudad.name+"'>")}),window.parent.destino.forEach(function(destino){$("#destino").append("<option value='"+destino.id+"'>"+destino.name+"</option>")}),window.parent.todos.forEach(function(usuario){lists.agente[usuario.nombre]=usuario.id,$("#agente-list").append("<option value='"+usuario.nombre+"'>")}),$(".moveBitacora").click(function(e){e.preventDefault(),moveBitacora()}),$(".seg-header").on("click",".segBtn",function(){var segId=$(this).data("segid"),elSeguimiento={};totalSeguimientos.forEach(function(seguimiento){seguimiento.data.id==segId&&(elSeguimiento=seguimiento)}),elSeguimiento.blockFields(),elSeguimiento.setValues(),elSeguimiento.setBitacora(),elSeguimiento.setListeners()}),$(".seg-header").on("click",".close",function(){var div=$(this).closest("div"),id=$(this).data("id"),index=-1;totalSeguimientos.forEach(function(seguimiento){seguimiento.data.id==id&&(index=seguimiento.number),index!=-1&&seguimiento.number>index&&(seguimiento.number=seguimiento.number-1)});var length=totalSeguimientos.length;if(length>1){if(0!=index)var newSeg=totalSeguimientos[index-1];else var newSeg=totalSeguimientos[index+1];newSeg.blockFields(),newSeg.setValues(),newSeg.setBitacora(),newSeg.setListeners()}totalSeguimientos.splice(index,1),$(div).remove()}),$("table").on("click",".segRow",function(e){e.preventDefault(),console.log(1);var id=$(this).data("id"),holder={},name="seg"+id;holder[name]=new Seguimiento(id),totalSeguimientos.push(holder[name])}),$("#agregarBtn").on("click",function(e){e.preventDefault();var id=$("#agregarSegg").val();$("#agregarSegg").val("");var holder={},name="seg"+id;holder[name]=new Seguimiento(id),totalSeguimientos.push(holder[name])}),$("#agregarMedioBtn").on("click",function(e){e.preventDefault(),addMedio()}),theSeg=Seguimiento(segId),totalSeguimientos.push(theSeg)});var totalSeguimientos=[],segNumber=0,segId=window.parent.idSeguimienteActualEnUso,theSeg={},lists={};0==segId&&window.parent.idSeguimienteActualEnUso==-1,window.onload=function(){$(".loader").hide(),$(".alert-text").addClass("alertMove")},$("#confirmModal").on("hidden.bs.modal",function(e){$(".modal-body").empty()});